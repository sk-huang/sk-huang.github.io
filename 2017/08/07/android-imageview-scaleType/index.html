<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>android imageview scaleType 和 adjustViewBounds | sk&#39;blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="问题之前在用imageloader，glide等图片加载框架加载图片时，很喜欢给imageview设的几个属性是 android:scaleType=&amp;quot;fitXY&amp;quot; android:layout_width=&amp;quot;wrap_content&amp;quot; android:layout_height=&amp;quot;wrap_content&amp;quot; 这样可以在不同手机上显示原图">
<meta name="keywords" content="scaleType;adjustViewBounds">
<meta property="og:type" content="article">
<meta property="og:title" content="android imageview scaleType 和 adjustViewBounds">
<meta property="og:url" content="http://yoursite.com/2017/08/07/android-imageview-scaleType/index.html">
<meta property="og:site_name" content="sk&#39;blog">
<meta property="og:description" content="问题之前在用imageloader，glide等图片加载框架加载图片时，很喜欢给imageview设的几个属性是 android:scaleType=&amp;quot;fitXY&amp;quot; android:layout_width=&amp;quot;wrap_content&amp;quot; android:layout_height=&amp;quot;wrap_content&amp;quot; 这样可以在不同手机上显示原图">
<meta property="og:image" content="http://yoursite.com/images/scale_type/fit_xy_adjustViewBounds.png">
<meta property="og:image" content="http://yoursite.com/images/scale_type/fit_xy.png">
<meta property="og:image" content="http://yoursite.com/images/scale_type/center.png">
<meta property="og:image" content="http://yoursite.com/images/scale_type/center_crop.png">
<meta property="og:image" content="http://yoursite.com/images/scale_type/center_inside.png">
<meta property="og:image" content="http://yoursite.com/images/scale_type/fit_center.png">
<meta property="og:image" content="http://yoursite.com/images/scale_type/fit_start.png">
<meta property="og:image" content="http://yoursite.com/images/scale_type/fit_end.png">
<meta property="og:image" content="http://yoursite.com/images/scale_type/matrix.png">
<meta property="og:image" content="http://yoursite.com/images/scale_type/fit_xy_not_adjustViewBounds.png">
<meta property="og:image" content="http://yoursite.com/images/scale_type/fit_xy_adjustViewBounds.png">
<meta property="og:updated_time" content="2017-08-07T09:59:39.143Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="android imageview scaleType 和 adjustViewBounds">
<meta name="twitter:description" content="问题之前在用imageloader，glide等图片加载框架加载图片时，很喜欢给imageview设的几个属性是 android:scaleType=&amp;quot;fitXY&amp;quot; android:layout_width=&amp;quot;wrap_content&amp;quot; android:layout_height=&amp;quot;wrap_content&amp;quot; 这样可以在不同手机上显示原图">
<meta name="twitter:image" content="http://yoursite.com/images/scale_type/fit_xy_adjustViewBounds.png">
  
    <link rel="alternate" href="/atom.xml" title="sk&#39;blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">sk&#39;blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-android-imageview-scaleType" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/07/android-imageview-scaleType/" class="article-date">
  <time datetime="2017-08-07T02:47:57.000Z" itemprop="datePublished">2017-08-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      android imageview scaleType 和 adjustViewBounds
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>之前在用imageloader，glide等图片加载框架加载图片时，很喜欢给imageview设的几个属性是</p>
<pre><code>android:scaleType=&quot;fitXY&quot;
android:layout_width=&quot;wrap_content&quot;
android:layout_height=&quot;wrap_content&quot;
</code></pre><p>这样可以在不同手机上显示原图的大小，特别是一些小图标的显示，这样做，按照高分辨率兼容低分率的情况可以不用管适配问题。</p>
<p>但是最近在项目里遇到一个问题，如果是一张超过部分手机分辨率的的大图，或者当前图片的宽高已然超过手机宽高，图片会变形。 即使设置<code>android:layout_width=&quot;match_parent&quot;</code>也一样</p>
<p>先来看下scaletype的几个属性，样例imageview宽高都是match_parent</p>
<h2 id="原图"><a href="#原图" class="headerlink" title="原图"></a>原图</h2><p><img src="/images/scale_type/fit_xy_adjustViewBounds.png" alt="&quot;加了adjustViewBounds&quot;"></p>
<h2 id="FIT-XY"><a href="#FIT-XY" class="headerlink" title="FIT_XY"></a>FIT_XY</h2><blockquote>
<p>Scale the image using FILL. </p>
</blockquote>
<p>把原图按照imageview的指定大小拉伸缩放图片，不按照比例。</p>
<p><img src="/images/scale_type/fit_xy.png" alt="fit_xy"></p>
<h2 id="CENTER"><a href="#CENTER" class="headerlink" title="CENTER"></a>CENTER</h2><blockquote>
<p>Center the image in the view, but perform no scaling.</p>
</blockquote>
<p>保持原图的大小，显示在ImageView的中心。当原图的size大于ImageView的size，超过部分裁剪处理。</p>
<p><img src="/images/scale_type/center.png" alt="fit_center"></p>
<h2 id="CENTER-CROP"><a href="#CENTER-CROP" class="headerlink" title="CENTER_CROP"></a>CENTER_CROP</h2><blockquote>
<p>Scale the image uniformly (maintain the image’s aspect ratio) so that both dimensions (width and height) of the image will be equal to or larger than the corresponding dimension of the view (minus padding).</p>
</blockquote>
<p>以填满整个ImageView为目的，将原图的中心对准ImageView的中心，等比例放大原图，直到填满ImageView为止（指的是ImageView的宽和高都要填满），原图超过ImageView的部分作裁剪处理 </p>
<p><img src="/images/scale_type/center_crop.png" alt="CENTER_CROP"></p>
<h2 id="CENTER-INSIDE"><a href="#CENTER-INSIDE" class="headerlink" title="CENTER_INSIDE"></a>CENTER_INSIDE</h2><blockquote>
<p>Scale the image uniformly (maintain the image’s aspect ratio) so that both dimensions (width and height) of the image will be equal to or less than the corresponding dimension of the view (minus padding). </p>
</blockquote>
<p>以原图完全显示为目的，将图片的内容完整居中显示，通过按比例缩小原图的size宽(高)等于或小于ImageView的宽(高)。如果原图的size本身就小于ImageView的size，则原图的size不作任何处理，居中显示在ImageView。</p>
<p><img src="/images/scale_type/center_inside.png" alt="CENTER_INSIDE"></p>
<h2 id="FIT-CENTER"><a href="#FIT-CENTER" class="headerlink" title="FIT_CENTER"></a>FIT_CENTER</h2><blockquote>
<p>Scale the image using CENTER. </p>
</blockquote>
<p>把原图按比例扩大或缩小到ImageView的高度，居中显示</p>
<p><img src="/images/scale_type/fit_center.png" alt="FIT_CENTER"></p>
<h2 id="FIT-START"><a href="#FIT-START" class="headerlink" title="FIT_START"></a>FIT_START</h2><blockquote>
<p>Scale the image using START. </p>
</blockquote>
<p>把原图按比例扩大(缩小)到ImageView的高度，显示在ImageView的上部分位置</p>
<p><img src="/images/scale_type/fit_start.png" alt="FIT_START"></p>
<h2 id="FIT-END"><a href="#FIT-END" class="headerlink" title="FIT_END"></a>FIT_END</h2><blockquote>
<p>Scale the image using END.</p>
</blockquote>
<p>把原图按比例扩大(缩小)到ImageView的高度，显示在ImageView的下部分位置 </p>
<p><img src="/images/scale_type/fit_end.png" alt="FIT_END"></p>
<h2 id="MATRIX"><a href="#MATRIX" class="headerlink" title="MATRIX"></a>MATRIX</h2><blockquote>
<p>Scale using the image matrix when drawing. </p>
</blockquote>
<p>不改变原图的大小，从ImageView的左上角开始绘制原图，原图超过ImageView的部分作裁剪处理。</p>
<p><img src="/images/scale_type/matrix.png" alt="MATRIX"></p>
<h2 id="adjustViewBounds"><a href="#adjustViewBounds" class="headerlink" title="adjustViewBounds"></a>adjustViewBounds</h2><blockquote>
<p>Set this to true if you want the ImageView to adjust its bounds to preserve the aspect ratio of its drawable.</p>
<p>Note: If the application targets API level 17 or lower, adjustViewBounds will allow the drawable to shrink the view bounds, but not grow to fill available measured space in all cases. This is for compatibility with legacy MeasureSpec and RelativeLayout behavior.</p>
</blockquote>
<p>如果设置为true，允许imageview调整边界保持长宽比。 </p>
<h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><p>加一个属性保持缩放比<code>android:adjustViewBounds=&quot;true&quot;</code>就好了</p>
<p>增加adjustViewBounds前<br><img src="/images/scale_type/fit_xy_not_adjustViewBounds.png" alt="&quot;没加adjustViewBounds&quot;"></p>
<p>增加adjustViewBounds后<br><img src="/images/scale_type/fit_xy_adjustViewBounds.png" alt="&quot;加了adjustViewBounds&quot;"></p>
<p>查阅资料，网上的说法是增加adjustViewBounds前不能单独使用，需要配合maxWidth或maxHeight一起使用。但是测试下来直接设置是有效的。 目前没有试上面说的targets 17以下的机型。</p>
<p>然后稍微看了下源码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAdjustViewBounds</span><span class="params">(<span class="keyword">boolean</span> adjustViewBounds)</span> </span>&#123;</div><div class="line">     mAdjustViewBounds = adjustViewBounds;</div><div class="line">     <span class="keyword">if</span> (adjustViewBounds) &#123;</div><div class="line">         setScaleType(ScaleType.FIT_CENTER);</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>设置adjustViewBounds，会改变scaletype为fitcenter，当imageview的宽高小于等于图片宽高时，fitcenter和fitxy+AdjustViewBounds 效果类似，但是imageview的宽高大于图片宽高时，fitcenter会居中缩放显示，fitxy+AdjustViewBounds会从上面缩放显示</p>
<p>关于这个adjustViewBounds感觉还是得抽时间撸撸源码。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/07/android-imageview-scaleType/" data-id="cj9xkragk000ae02p13mqdwyq" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scaleType-adjustViewBounds/">scaleType;adjustViewBounds</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/09/26/2017-09-26/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          使用DayNight主题和webview的冲突
        
      </div>
    </a>
  
  
    <a href="/2017/07/12/stetho-develop/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">使用调试神器stetho碰到的一些问题</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DayNight/">DayNight</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/hexo/">hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/kotlin/">kotlin</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/wechat/">wechat</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/DayNight/">DayNight</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kotlin/">kotlin</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scaleType-adjustViewBounds/">scaleType;adjustViewBounds</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/微信/">微信</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/DayNight/" style="font-size: 10px;">DayNight</a> <a href="/tags/hexo/" style="font-size: 20px;">hexo</a> <a href="/tags/kotlin/" style="font-size: 10px;">kotlin</a> <a href="/tags/scaleType-adjustViewBounds/" style="font-size: 10px;">scaleType;adjustViewBounds</a> <a href="/tags/微信/" style="font-size: 10px;">微信</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">十一月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/11/10/2017-11-13/">kotlin for android (一)</a>
          </li>
        
          <li>
            <a href="/2017/09/28/2017-09-28/">微信调用返回的坑</a>
          </li>
        
          <li>
            <a href="/2017/09/26/2017-09-26/">使用DayNight主题和webview的冲突</a>
          </li>
        
          <li>
            <a href="/2017/08/07/android-imageview-scaleType/">android imageview scaleType 和 adjustViewBounds</a>
          </li>
        
          <li>
            <a href="/2017/07/12/stetho-develop/">使用调试神器stetho碰到的一些问题</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 sk<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>